<template>
  <div>
    <svg
      ref="svgEl"
      class="svgEl"
      width="259"
      height="254"
      viewBox="0 0 259 254"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g
        ref="outCircleEl"
        class="outCircleEl"
      >
        <circle
          cx="130.595"
          cy="126.341"
          r="71.4326"
          stroke="#8BAA8B"
          stroke-width="6.39695"
        />
        <path
          d="M130.595 54.9084C150.852 55.9746 163.646 60.2392 179.639 74.0993"
          stroke="#1C5C26"
          stroke-width="6.82342"
          stroke-linecap="round"
        />
      </g>
      <g
        ref="mainEl"
        filter="url(#filter0_ddi_4_18)"
        class="mainEl"
      >
        <circle
          cx="130.595"
          cy="126.341"
          r="53.3079"
          fill="#509638"
        />

        <path
          d="M121.33 133.383V135.095H127.71V133.383H121.33ZM108.383 120.036V121.749H117.39V120.036H108.383ZM120.533 118.512V136.807H122.245V120.201H126.772V136.643H128.555V118.512H120.533ZM116.921 120.036V120.459C116.757 130.498 116.546 133.969 116.006 134.696C115.795 135.001 115.584 135.071 115.232 135.048C114.786 135.048 113.778 135.048 112.675 134.954C112.98 135.447 113.168 136.221 113.191 136.737C114.247 136.807 115.326 136.807 115.983 136.713C116.686 136.643 117.108 136.432 117.531 135.822C118.281 134.79 118.445 131.365 118.633 120.928C118.633 120.693 118.633 120.036 118.633 120.036H116.921ZM111.714 115.908C111.69 124.118 111.714 131.858 107.797 135.986C108.242 136.244 108.852 136.784 109.157 137.182C113.285 132.702 113.402 124.563 113.426 115.908H111.714ZM134.864 122.335C134.325 123.93 133.293 125.572 131.698 126.51L133.058 127.448C134.77 126.416 135.709 124.61 136.318 122.851L134.864 122.335ZM137.726 121.936V126.534C137.726 128.269 138.336 128.715 140.775 128.715C141.291 128.715 144.974 128.715 145.513 128.715C147.46 128.715 147.952 128.082 148.164 125.502C147.718 125.408 147.085 125.173 146.709 124.939C146.615 126.979 146.428 127.284 145.372 127.284C144.551 127.284 141.479 127.284 140.869 127.284C139.555 127.284 139.321 127.167 139.321 126.534V121.936H137.726ZM138.852 120.576C140.282 121.233 142.042 122.335 142.886 123.156L143.824 122.007C142.933 121.209 141.174 120.177 139.743 119.544L138.852 120.576ZM147.671 123.297C149.266 124.634 151.025 126.581 151.776 127.871L153.136 126.909C152.339 125.595 150.533 123.719 148.938 122.429L147.671 123.297ZM146.498 120.482C143.402 124.681 137.632 127.448 131.463 128.95C131.792 129.325 132.308 130.052 132.495 130.427C138.617 128.692 144.575 125.76 148.023 121.162L146.498 120.482ZM141.361 129.09V135.4H143.167V129.09H141.361ZM134.372 130.427V137.182H136.107V130.427H134.372ZM148.75 130.427V137.112H150.509V130.427H148.75ZM135.24 134.509V136.15H149.688V134.509H135.24ZM141.361 115.603V118.653H143.167V115.603H141.361ZM132.401 117.597V122.194H134.114V119.192H150.509V122.194H152.292V117.597H132.401Z"
          fill="#EAEAEA"
        />
        <path
          d="M108.765 128.011L109.281 129.771C111.65 129.09 114.793 128.129 117.749 127.237L117.538 125.595C114.348 126.487 110.994 127.448 108.765 128.011ZM108.976 120.318V122.007H117.514V120.318H108.976ZM112.495 115.603V134.837C112.495 135.165 112.378 135.283 112.049 135.283C111.744 135.283 110.712 135.283 109.61 135.259C109.844 135.728 110.102 136.455 110.149 136.924C111.791 136.924 112.753 136.901 113.41 136.596C114.019 136.315 114.254 135.845 114.254 134.837V115.603H112.495ZM117.632 117.574V119.309H130.391V117.574H117.632ZM124.316 118.183V134.579C124.316 135.001 124.176 135.142 123.707 135.165C123.191 135.189 121.502 135.189 119.766 135.118C120.047 135.634 120.376 136.502 120.47 137.042C122.698 137.042 124.176 137.018 125.044 136.69C125.911 136.385 126.193 135.799 126.193 134.579V118.183H124.316ZM133.394 117.128V118.793H152.815V117.128H133.394ZM132.526 125.502V127.19H153.565V125.502H132.526ZM146.505 117.996V137.182H148.311V117.996H146.505ZM138.155 117.996V124.493C138.155 128.551 137.616 132.843 132.573 135.963C133.018 136.244 133.652 136.854 133.957 137.253C139.351 133.852 139.938 129.043 139.938 124.493V117.996H138.155Z"
          fill="#EAEAEA"
        />
        <rect
          ref="rect1El"
          class="rect1El"
          x="143"
          y="144"
          width="13"
          height="4"
          rx="2"
          fill="#EAEAEA"
        />
        <rect
          ref="rect2El"
          class="rect2El"
          x="124"
          y="144"
          width="13"
          height="4"
          rx="2"
          fill="#EAEAEA"
        />
        <rect
          ref="rect3El"
          class="rect3El"
          x="105"
          y="144"
          width="13"
          height="4"
          rx="2"
          fill="#EAEAEA"
        />
      </g>
      <path
        ref="waveEl"
        class="waveEl"
        d="M221.806 86.5917C210.236 50.9882 187.392 39.9374 147.247 26.4341C125.306 20.94 114.473 21.6623 98.3975 31.3449C98.3975 31.3449 77.8294 52.2159 68.8309 58.3545C59.8323 64.493 35.4077 73.0869 37.9788 87.8194C40.5499 102.552 28.9803 114.829 36.6933 134.472C44.4063 154.116 32.8367 157.799 43.1208 161.482C53.4048 165.165 55.9759 179.897 55.9759 179.897C57.6899 180.716 120.788 260.903 163.958 216.729C199.952 179.897 207.142 211.777 215.378 173.759C223.091 138.155 233.375 122.195 221.806 86.5917Z"
        stroke="#95DFA1"
        stroke-opacity="0.69"
        stroke-width="0.426464"
        stroke-linecap="round"
      />
      <defs>
        <filter
          id="filter0_ddi_4_18"
          x="67.2874"
          y="70.0331"
          width="126.616"
          height="126.616"
          filterUnits="userSpaceOnUse"
          color-interpolation-filters="sRGB"
        >
          <feFlood
            flood-opacity="0"
            result="BackgroundImageFix"
          />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha"
          />
          <feMorphology
            radius="3"
            operator="erode"
            in="SourceAlpha"
            result="effect1_dropShadow_4_18"
          />
          <feOffset dy="7" />
          <feGaussianBlur stdDeviation="6.5" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0"
          />
          <feBlend
            mode="normal"
            in2="BackgroundImageFix"
            result="effect1_dropShadow_4_18"
          />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha"
          />
          <feOffset dy="2" />
          <feGaussianBlur stdDeviation="2" />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.4 0"
          />
          <feBlend
            mode="normal"
            in2="effect1_dropShadow_4_18"
            result="effect2_dropShadow_4_18"
          />
          <feBlend
            mode="normal"
            in="SourceGraphic"
            in2="effect2_dropShadow_4_18"
            result="shape"
          />
          <feColorMatrix
            in="SourceAlpha"
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
            result="hardAlpha"
          />
          <feOffset dy="-3" />
          <feComposite
            in2="hardAlpha"
            operator="arithmetic"
            k2="-1"
            k3="1"
          />
          <feColorMatrix
            type="matrix"
            values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"
          />
          <feBlend
            mode="normal"
            in2="shape"
            result="effect3_innerShadow_4_18"
          />
        </filter>
      </defs>
    </svg>
  </div>
</template>

<script setup lang="ts">
import {onMounted, ref} from 'vue';
// import anime from 'animejs/lib/anime.es.js';
import {gsap} from 'gsap';

// const svgEl = ref(null);
const mainEl = ref(null);
const waveEl = ref(null);
const outCircleEl = ref(null);
const rect1El = ref(null);
const rect2El = ref(null);
const rect3El = ref(null);
onMounted(() => {
  gsap.registerEffect({
    name: 'scale',
    defaults: {duration: 0.5, scale: 1.2},
    effect: (targets: gsap.TweenTarget, config: gsap.TweenVars) => {
      return gsap.to(targets, {
        duration: config.duration,
        scale: config.scale,
        repeat: -1,
        yoyo: true,
        ease: 'none',
        transformOrigin: 'center center',
      });
    },
  });

  gsap.effects.scale(mainEl.value);
  gsap.effects.scale(outCircleEl.value, {
    scale: 1.6,
  });
  gsap.effects.scale(waveEl.value, {
    scale: 1.8,
  });

  gsap.to(outCircleEl.value, {
    rotate: 360,
    duration: 1,
    repeat: -1,
    ease: 'power4.inOut',
    transformOrigin: 'center center',
  });

  gsap.registerEffect({
    name: 'grow',
    defaults: {duration: 0.5, scaleY: 5, delay: 0},
    effect: (targets: gsap.TweenTarget, config: gsap.TweenVars) => {
      return gsap.to(targets, {
        duration: config.duration,
        scaleY: config.scaleY,
        repeat: -1,
        yoyo: true,
        ease: 'power4.inOut',
        delay: config.delay,
        transformOrigin: 'center bottom',
      });
    },
  });

  gsap.effects.grow(rect1El.value, {
    scaleY: 8,
    delay: 0.2,
    duration: 0.6,
  });

  gsap.effects.grow(rect2El.value, {
    scaleY: 10,
    duration: 0.7,
  });
  gsap.effects.grow(rect3El.value, {
    delay: 0.3,
  });

});
</script>

<style scoped lang="scss"></style>
